<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper ml-0">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Sign Payment Request</h1>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <section class="content" >
      <div class="container-fluid">
        <div class="row">
          <div class="col-12">
            <!-- Main content -->
            <div class="invoice p-3 mb-3">

              <div class="row invoice-info">
                <div class="col-12" *ngIf="formErrors.length > 0" style="color: red;">
                  <div class="callout callout-danger">
                     <h5 style="color: black;">
                       Please fill out the following required fields:
                     </h5> 
                     <ul>
                       <li *ngFor="let error of formErrors">{{error}}</li>
                     </ul>
                  </div>
                </div>

                <div class="col-12 invoice-col text-center">
                    <h5><b>PR No. 17</b></h5>
                    <p><b>Status: </b><span style="color: red;">Need Signature</span></p>
                </div>
                
              </div>
              <!-- info row -->

              <div class="row">
                <div class="col-sm-6 invoice-info">
                  <div class="form-group row">
                    <label class="col-sm-3 ">Date created:</label>
                    <div class="col-sm-9">
                      <p class="mb-0">{{pr.creationDate}}</p>
                      <!-- <input type="text" class="form-control" [value]="pr.department.name" disabled> -->
                    </div>
                  </div>
                </div>
              </div>


              <div class="row">
                <div class="col-sm-6 invoice-info">
                  <div class="form-group row">
                    <label class="col-sm-3 ">Ministry Team</label>
                    <div class="col-sm-9">
                      <p class="mb-0">{{pr.department.name}}</p>
                      <!-- <input type="text" class="form-control" [value]="pr.department.name" disabled> -->
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-horizontal">
                <div class="row invoice-info" *ngIf="hasTeamLeader">                  
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-6 ">Ministry Team Leader:</label>
                      <div class="col-sm-6">
                        <p class="mb-0">{{teamLeaderName}}</p>
                      </div>
                    </div>
                  </div>   
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-4">Signature</label>
                      <div class="col-sm-8">
                        <img class="signature" src="{{teamLeaderSignature.member.signature}}" *ngIf="teamLeaderSignature.hasSigned">
                        <p class="mb-0 red" *ngIf="!directorSignature.hasSigned"> Need signature</p>
                      </div>
                    </div>
                  </div>   
                  <div class="col-2 invoice-col" *ngIf="directorSignature.hasSigned">         
                    <div class="form-group row">
                      <label class="col-sm-3">Date:</label>
                      <div class="col-sm-9">
                        <p class="mb-0">{{teamLeaderSignature.signedDate}}</p>
                      </div>
                    </div>
                  </div>   
                </div>
                <div class="row invoice-info">                  
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-6 ">Steering commitee:</label>
                      <div class="col-sm-6">
                        <p class="mb-0">{{directorName}}</p>
                      </div>
                    </div>
                  </div>   
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-4">Signature</label>
                      <div class="col-sm-8">
                        <img class="signature" src="{{directorSignature.member.signature}}" *ngIf="directorSignature.hasSigned">
                        <p class="mb-0 red" *ngIf="!directorSignature.hasSigned"> Need signature</p>
                      </div>
                    </div>
                  </div>   
                  <div class="col-2 invoice-col" *ngIf="directorSignature.hasSigned">         
                    <div class="form-group row">
                      <label class="col-sm-3">Date</label>
                      <div class="col-sm-9">
                        <p class="mb-0">{{directorSignature.signedDate}}</p>
                      </div>
                    </div>
                  </div>   
                </div>
                <div class="row invoice-info">                  
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-6 ">Pastor of Department:</label>
                      <div class="col-sm-6">
                        <p class="mb-0">{{pastorName}}</p>
                      </div>
                    </div>
                  </div>   
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-4">Signature</label>
                      <div class="col-sm-8">
                        <img class="signature" src="{{pastorSignature.member.signature}}" *ngIf="pastorSignature.hasSigned">
                        <p class="mb-0 red" *ngIf="!pastorSignature.hasSigned"> Need signature</p>
                      </div>
                    </div>
                  </div>   
                  <div class="col-2 invoice-col" *ngIf="pastorSignature.hasSigned">         
                    <div class="form-group row">
                      <label class="col-sm-3">Date</label>
                      <div class="col-sm-9">
                        <p class="mb-0">{{pastorSignature.signedDate}}</p>
                      </div>
                    </div>
                  </div>   
                </div>
              </div> 

              <br>

              <div class="row">             
                <div class="col-12 table-responsive">
                  <table class="table table-bordered table-striped mt-2">
                    <thead>
                      <tr>
                        <th>Budget Code</th>
                        <th>Purchase Date</th>
                        <th>Item</th>
                        <th>Detailed Purpose</th>
                        <th>Amount</th>
                        <th>Remarks</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of items">
                        <td>{{item.budgetCode.code}}</td>
                        <td>{{item.purchaseDate}}</td>
                        <td>{{item.itemName}}</td>
                        <td>{{item.detailedPurpose}}</td>
                        <td>${{item.amount}}</td>
                        <td>{{item.remarks}}</td>
                      </tr>
                    </tbody>
                  </table>
                  <button type="button"  class="btn  btn-primary btn-sm ">View receipts</button>
                </div>

              </div>

              <br>

              <div class="row recepient-info">
                <div class="col-6 invoice-col">
                  <div class="form-group row mt-2 mb-2">
                    <label class="col-sm-3 ">Payable to:</label>
                    <div class="col-sm-9">
                      <p class="mb-0">{{pr.payableTo}}</p>
                      <!-- <input type="text" class="form-control" value="saddasd" disabled> -->
                    </div>
                  </div>  
                </div>
              </div>
              <div class="row recepient-info">
                <div class="col-6 invoice-col">
                  <div class="form-group row mt-2 mb-2">
                    <label class="col-sm-3 ">Address:</label>
                    <div class="col-sm-9">
                      <p class="mb-0">{{pr.requestorAddress}}</p>
                      <!-- <input type="text" class="form-control" value="saddasd" disabled> -->
                    </div>
                  </div>              
                </div>
              </div>

              <br>

              <div class="form-horizontal">
                <div class="row invoice-info">                  
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-6 ">Clerk:</label>
                      <div class="col-sm-6">
                        <p class="mb-0">-</p>
                        <!-- <input type="text" class="form-control" value="saddasd" disabled> -->
                      </div>
                    </div>
                  </div>   
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-4">Signature</label>
                      <div class="col-sm-8">
                        <p class="mb-0 red" >Need signature</p>
                      </div>
                    </div>
                  </div>   
                </div>
                <div class="row invoice-info">                  
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-6 ">Finance Team:</label>
                      <div class="col-sm-6">
                        <p class="mb-0">-</p>
                        <!-- <input type="text" class="form-control" value="saddasd" disabled> -->
                      </div>
                    </div>
                  </div>   
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-4">Signature</label>
                      <div class="col-sm-8">
                        <p class="mb-0 red" > Need signature</p>
                      </div>
                    </div>
                  </div>   
                </div>
                <div class="row invoice-info">                  
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-6 ">Requestor:</label>
                      <div class="col-sm-6">
                        <p class="mb-0">-</p>
                        <!-- <input type="text" class="form-control" value="saddasd" disabled> -->
                      </div>
                    </div>
                  </div>   
                  <div class="col-3 invoice-col ">         
                    <div class="form-group row">
                      <label class="col-sm-4">Signature</label>
                      <div class="col-sm-8">
                        <img class="signature" src="{{pr.requestor.signature}}">
                      </div>
                    </div>
                  </div>   
                  <div class="col-2 invoice-col">         
                    <div class="form-group row">
                      <label class="col-sm-3">Date</label>
                      <div class="col-sm-9">
                        <p class="mb-0">{{pr.creationDate}}</p>
                      </div>
                    </div>
                  </div>   
                </div>
              </div>

              <br>
              <hr>
              
              <div class="row">
                <div class="col-12">
                  <div class="row">
                    <div class="col-sm-6 invoice-info">
                      <div class="form-group row">
                        <label class="col-sm-3 ">Signer Name: </label>
                        <div class="col-sm-9">
                          <p class="mb-0">{{memberName}}</p>
                          <!-- <input type="text" class="form-control" [value]="pr.department.name" disabled> -->
                        </div>
                      </div>
                    </div>
                  </div>
                  <p><b>Please sign here: </b></p>
                  <div class="sig-container mb-1">
                    <signature-pad [options]="signaturePadOptions" (onBeginEvent)="drawStart()" (onEndEvent)="drawComplete()"></signature-pad>
                  </div>
                  <div class="input-group">
                    <button type="button" (click)="clear()" class="btn btn-sm btn-outline-primary">clear</button>
                  </div>
                </div>
              </div>

              <!-- this row will not appear when printing -->
              <div class="row no-print">
                <div class="col-12">
                  <div class="float-right"> 
                    <button type="button" class="btn  btn-success mr-1" (click)="submit()">
                      Sign
                    </button>
                    <button type="button" class="btn  btn-default">Cancel</button>
                  </div>
                </div>                
              </div>
            </div>
            <!-- /.invoice -->
          </div><!-- /.col -->

        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>


